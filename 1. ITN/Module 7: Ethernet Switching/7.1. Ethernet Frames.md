
| **Title** | 7.1. Ethernet Frames |
|:---------:|:---------------------:|
| **ID**    | CCNET033              |
| **Tag**   | CCNA, Cisco, NetAcad, Ethernet, Data Link |

---

## 7.1.1. Ethernet Encapsulation

Ethernet là công nghệ LAN phổ biến nhất hiện nay (song song với WLAN). Nó hoạt động ở **Data Link layer** và **Physical layer** của mô hình OSI, được định nghĩa trong chuẩn **IEEE 802.2 và 802.3**.  

Ethernet hỗ trợ nhiều tốc độ băng thông từ **10 Mbps đến 100 Gbps**, và sử dụng nhiều loại cáp như **twisted pair (xoắn đôi), coaxial (đồng trục), fiber-optic (cáp quang)**.  

Trong OSI, Ethernet đảm nhiệm hai vai trò chính:
- **Tầng 2 (Data Link):** định nghĩa khung Ethernet và cơ chế truy cập đường truyền.
- **Tầng 1 (Physical):** định nghĩa chuẩn truyền dẫn vật lý (cáp, tín hiệu, tốc độ).  

---

## 7.1.2. Data Link Sublayers

Chuẩn **IEEE 802** chia tầng Data Link thành **2 sublayer**:

- **LLC (Logical Link Control – IEEE 802.2):**
  - Kết nối phần mềm mạng ở tầng trên với phần cứng ở tầng dưới.
  - Gắn thông tin vào khung để xác định giao thức tầng mạng nào (IPv4, IPv6, ARP, v.v.).
  - Cho phép nhiều giao thức tầng 3 cùng sử dụng một giao diện mạng.

- **MAC (Media Access Control – IEEE 802.3/802.11/802.15):**
  - Được cài đặt trong phần cứng.
  - Chịu trách nhiệm **đóng gói dữ liệu** vào khung Ethernet.
  - Quản lý **địa chỉ MAC**, kiểm soát truy cập vào phương tiện truyền dẫn.  

<p align="center">
  <img src="../../images/kì 1/module 7/7.1.2.jpg" width="400"/>
</p>

---

## 7.1.3. MAC Sublayer

MAC sublayer có hai nhiệm vụ chính: **Data Encapsulation** và **Media Access**.

- **Data Encapsulation:**
  - Định nghĩa cấu trúc Ethernet frame.
  - Gắn **địa chỉ MAC nguồn và đích** để chuyển dữ liệu trong LAN.
  - Thêm **FCS (Frame Check Sequence)** để kiểm tra lỗi.

- **Accessing the Media:**
  - Ethernet ban đầu (bus/hub) dùng cơ chế **CSMA/CD** trong môi trường half-duplex để tránh xung đột khi nhiều thiết bị truyền cùng lúc.
  - Ethernet hiện đại dùng **switch full-duplex**, không cần CSMA/CD, vì mỗi kênh truyền riêng biệt không xảy ra va chạm.  

---

## 7.1.4. Ethernet Frame Fields

Kích thước khung Ethernet chuẩn: **64 – 1518 bytes** (không tính phần Preamble field - trường mở đầu).  
- Kích thước < 64 bytes → bị coi là **runt frame** hoặc **collision fragment**, frame không hợp lệ và bị loại bỏ.  
- Kích thước > 1518 bytes → **jumbo frame** hoặc **baby giant frames**, đây là các frame đặc biệt giúp tăng hiệu năng hệ thống nhưng chỉ được hỗ trợ bởi 1 số thiết bị hiệu năng cao như Fast Ethernet và Gigabit Ethernet switches.

<p align="center">
  <img src="../../images/kì 1/module 7/7.1.2.jpg" width="400"/>
</p>

Các trường trong khung Ethernet:

| **Field** | **Mô tả** |
|-----------|-----------|
| **Preamble & SFD** | 8 byte đầu (7 byte Preamble + 1 byte SFD) để đồng bộ hóa và báo hiệu bắt đầu khung. |
| **Destination MAC** | 6 byte, địa chỉ MAC của thiết bị đích (unicast, multicast, broadcast). |
| **Source MAC** | 6 byte, địa chỉ MAC của thiết bị gửi. |
| **Type/Length** | 2 byte, xác định giao thức tầng trên (0x0800 = IPv4, 0x86DD = IPv6, 0x0806 = ARP). |
| **Data** | 46 – 1500 byte, chứa dữ liệu tầng trên (thường là gói IPv4/IPv6). Nếu gói nhỏ hơn, thêm **padding** để đạt tối thiểu 64 byte. |
| **FCS (Frame Check Sequence)** | 4 byte, chứa CRC để phát hiện lỗi trong quá trình truyền. |

> Nếu FCS không khớp → khung bị loại bỏ.  

---

👉 **Tóm lại:** Ethernet encapsulation giúp gói tin từ tầng Network được truyền qua LAN/WAN bằng cách **đóng gói vào khung**, gắn địa chỉ MAC, kiểm tra lỗi, và truyền qua phương tiện vật lý theo chuẩn IEEE.  

