
| **Title** | 6.2. Network Topologies and Access Methods |
|:---------:|:-------------------------------------------:|
| **ID**    | CCNET031                                    |
| **Tag**   | CCNA, Cisco, NetAcad, OSI, TCP/IP, Network Layer, Routing |

---

## 6.2.1. Physical and Logical Topologies

**Topology** là cách sắp xếp và kết nối các thiết bị mạng. Có hai loại:

- **Physical topology**:  
  Mô tả cách các thiết bị (router, switch, AP, server, PC, v.v.) được kết nối vật lý, bao gồm vị trí thiết bị, sơ đồ đi dây, vị trí trong phòng hoặc trên rack.  
  Ví dụ phổ biến: **Point-to-Point**, **Star**.
<p align="center">
  <img src="../../images/kì 1/module 6/6.2.1_1.jpg" width="400"/>
</p>

- **Logical topology**:  
  Mô tả cách dữ liệu (frame) di chuyển từ node này sang node khác, thông qua các kết nối logic và cách địa chỉ IP/port được dùng.  
  Đây là "cái nhìn" của **Data Link Layer** khi kiểm soát truy cập vào media.
  <p align="center">
  <img src="../../images/kì 1/module 6/6.2.1_2.jpg" width="400"/>
</p>

**Điểm khác biệt**: Một mạng có thể có sơ đồ vật lý phức tạp nhưng về logic lại đơn giản (hoặc ngược lại).  

---

## 6.2.2. WAN Topologies

Ba dạng topology vật lý phổ biến của WAN:

1. **Point-to-Point** – Kết nối trực tiếp giữa hai điểm (site).
2. **Hub-and-Spoke** – Một site trung tâm (hub) kết nối tới nhiều site nhánh (spoke).

<p align="center">
  <img src="../../images/kì 1/module 6/6.2.2_1.jpg" width="400"/>
</p>

3. **Mesh** – Mỗi site kết nối trực tiếp tới nhiều site khác, tạo nhiều đường dự phòng.

<p align="center">
  <img src="../../images/kì 1/module 6/6.2.2_2.jpg" width="400"/>
</p>

Ngoài ra còn có **Hybrid topology** – kết hợp nhiều dạng, ví dụ *Partial Mesh*.

---

## 6.2.3. Point-to-Point WAN Topology

- Kết nối vật lý trực tiếp giữa hai node.  
- Không phải chia sẻ media với thiết bị khác ⇒ **logic đơn giản**.
- Dùng các giao thức serial như **PPP (Point-to-Point Protocol)**, tất cả frame chỉ truyền giữa hai node.
- **Lưu ý**: Trên Ethernet point-to-point, thiết bị vẫn cần xác định frame có phải dành cho mình không.
- Khoảng cách xa có thể cần qua nhiều thiết bị trung gian vật lý, nhưng logic vẫn là point-to-point.
<p align="center">
  <img src="../../images/kì 1/module 6/6.2.3.jpg" width="400"/>
</p>

---

## 6.2.4. LAN Topologies


Khi thiết kế mạng cục bộ (LAN), việc chọn **topology** không chỉ ảnh hưởng đến hiệu suất, mà còn tác động đến khả năng mở rộng, bảo trì và xử lý sự cố. Topology mô tả **cách các thiết bị đầu cuối và thiết bị trung gian** được kết nối.

Hiện nay, **Ethernet LAN** phổ biến nhất với hai dạng chính:

- **Star topology** – Mỗi thiết bị kết nối trực tiếp đến một **switch** trung tâm.
- **Extended star topology** – Nhiều switch kết nối với nhau, mỗi switch phục vụ một nhóm thiết bị.

**Ưu điểm**:
- Dễ triển khai và mở rộng.
- Dễ bảo trì, hỏng một kết nối không làm sập toàn mạng.

**Ví dụ**: Văn phòng nhiều tầng, mỗi tầng có một switch riêng (hình sao), các switch tầng kết nối về switch chính ở phòng server (hình sao mở rộng).

**Legacy LAN topologies**:
- **Bus topology** – Tất cả thiết bị nối trên một cáp chung, rẻ nhưng khó mở rộng, dễ xung đột.
- **Ring topology** – Các thiết bị nối thành vòng khép kín, dữ liệu đi một chiều; dùng trong Token Ring, FDDI.

<p align="center">
  <img src="../../images/kì 1/module 6/6.2.4.jpg" width="400"/>
</p>

---

## 6.2.5. Half and Full Duplex Communication

**Duplex mode** xác định cách dữ liệu truyền giữa hai thiết bị:

- **Half-duplex** – Có thể gửi và nhận, nhưng **không đồng thời**. Thường thấy ở WLAN và mạng Ethernet dùng hub.
- **Full-duplex** – Có thể gửi và nhận đồng thời, mặc định trên switch Ethernet hiện đại.

> Hai thiết bị phải dùng cùng chế độ duplex, nếu không sẽ gây **duplex mismatch** → mất gói, hiệu suất kém.
<p align="center">
  <img src="../../images/kì 1/module 6/6.2.5.png" width="400"/>
</p>

---

## 6.2.6. Access Control Methods

Trong một mạng, đường truyền vật lý thường được nhiều thiết bị **chia sẻ**. Nếu không có quy tắc điều phối, nhiều thiết bị có thể **gửi dữ liệu cùng lúc**, gây **xung đột** hoặc **mất gói**.

**Ví dụ thực tế**:  
Hãy tưởng tượng một nhóm người cùng nói trên một tần số radio — nếu ai cũng nói cùng lúc, người nghe không hiểu được gì. Cần một cách để “phân làn” cho dữ liệu.

###  Hai loại phương pháp chính

#### a. Controlled Access
- Mỗi thiết bị được **quy định thời điểm** để truyền dữ liệu.
- Ví dụ: **Token Passing** – một “thẻ quyền gửi” (token) được chuyền tuần tự giữa các thiết bị. Chỉ thiết bị giữ token mới được gửi.
- Ưu điểm: Không có xung đột.
- Nhược điểm: Nếu token bị mất hoặc lỗi → phải tái tạo, gây trễ.

#### b. Contention-Based Access
- Mọi thiết bị **tranh quyền** gửi khi đường truyền rảnh.
- Không ai được “đặt lịch” sẵn.
- Cần cơ chế xử lý khi hai thiết bị gửi cùng lúc.
- Ví dụ: **CSMA/CD** - Carrier Sense Multiple Access with Collision Detection - phát hiện đụng độ (Ethernet cũ), **CSMA/CA** - Carrier Sense Multiple Access with Collision Avoidance - tránh đụng độ (Wi-Fi).

> Ethernet hiện đại vẫn dùng nguyên lý contention-based, nhưng switch và full-duplex đã loại bỏ phần lớn xung đột.

---

## 6.2.7. Contention-Based Access – CSMA/CD


###  Mục đích của CSMA/CD
**CSMA/CD** (Carrier Sense Multiple Access with Collision Detection) được thiết kế để:
- Cho phép nhiều thiết bị chia sẻ một kênh truyền.
- Giảm thiểu thời gian và băng thông bị mất do **xung đột**.

Áp dụng trong:  
- Ethernet **bus topology** hoặc mạng dùng **hub** (half-duplex).

###  Nguyên tắc hoạt động

1. **Carrier Sense** – Thiết bị lắng nghe đường truyền, nếu rảnh mới gửi.
2. **Multiple Access** – Nhiều thiết bị cùng có quyền truy cập.
3. **Collision Detection** – Trong khi gửi, thiết bị vẫn lắng nghe tín hiệu.  
   - Nếu phát hiện tín hiệu khác → có xung đột.
4. **Jam Signal** – Gửi tín hiệu “jam” để báo cho tất cả thiết bị dừng gửi.
5. **Backoff** – Chờ một khoảng thời gian ngẫu nhiên rồi thử gửi lại.

<p align="center">
  <img src="../../images/kì 1/module 6/6.2.7.png" width="400"/>
</p>

###  Ví dụ
- PC1 và PC2 cùng kết nối vào hub.
- Cả hai phát hiện đường truyền rảnh và bắt đầu gửi.
- Xung đột xảy ra → cả hai nhận ra, gửi jam signal, chờ backoff rồi gửi lại.

###  Lưu ý
- CSMA/CD **không còn** được dùng trong Ethernet switch full-duplex vì:
  - Mỗi kết nối chỉ có 2 thiết bị → không xảy ra xung đột.
  - Switch phân tách collision domain.

---

## 6.2.8. Contention-Based Access – CSMA/CA


###  Tại sao CSMA/CA ra đời?
Trong mạng không dây, thiết bị **không thể vừa truyền vừa nghe** để phát hiện xung đột (collision) như Ethernet.  
→ Cần **ngăn chặn xung đột ngay từ đầu** thay vì phát hiện.

###  Nguyên tắc hoạt động

1. **Carrier Sense** – Kiểm tra kênh truyền có đang rảnh không.
2. **Random Backoff** – Nếu rảnh, chờ một khoảng thời gian ngẫu nhiên để giảm khả năng 2 thiết bị gửi cùng lúc.
3. **Request to Send (RTS)** – (Tùy chọn) Gửi gói yêu cầu gửi dữ liệu.
4. **Clear to Send (CTS)** – (Tùy chọn) Thiết bị đích xác nhận sẵn sàng nhận.
5. **Transmit Data** – Gửi dữ liệu.
6. **ACK** – Nhận gói xác nhận từ thiết bị đích; nếu không có ACK → gửi lại.

<p align="center">
  <img src="../../images/kì 1/module 6/6.2.8.png" width="400"/>
</p>

###  Ví dụ thực tế
- Laptop A và B cùng kết nối Wi-Fi.
- Cả hai muốn gửi dữ liệu, nhưng Laptop A bắt đầu đếm backoff trước và gửi RTS trước.
- Laptop B thấy CTS từ AP cho A → B sẽ chờ, tránh xung đột.


###  Ưu & Nhược điểm
- Ưu: Giảm mất gói, phù hợp môi trường wireless.
- Nhược: Tăng độ trễ, hiệu suất giảm khi số thiết bị lớn.
