
| **Title** | 6.3. Data Link Layer Frames |
|:---------:|:----------------------------:|
| **ID**    | CCNET032                      |
| **Tag**   | CCNA, Cisco, NetAcad, Frame, Layer2, Ethernet, WAN |

## 6.3.1 The Frame

**Mục đích:**  
Tại tầng liên kết dữ liệu (Data Link Layer), dữ liệu (thường là gói IPv4 hoặc IPv6) cần được **đóng gói** thành **frame** để có thể truyền qua phương tiện mạng (media). Frame cung cấp thông tin điều khiển, định địa chỉ và đảm bảo tính toàn vẹn dữ liệu trong quá trình truyền.

**Khái niệm:**  
Mỗi frame gồm 3 phần chính:
- **Header** – Chứa thông tin điều khiển,  địa chỉ, và các tham số cần thiết để truyền tải.
- **Data** – Phần dữ liệu chính, bao gồm gói tin Layer 3.
- **Trailer** – Chứa thông tin phát hiện lỗi, thường sử dụng CRC (Cyclic Redundancy Check).

**Lưu ý:**  
Không có một cấu trúc frame duy nhất cho mọi loại mạng. Mỗi môi trường mạng (Ethernet, WLAN, WAN,...) có yêu cầu điều khiển khác nhau → khung (frame) sẽ có kích thước và trường dữ liệu khác nhau. Ví dụ:
- **WLAN** cần thêm thông tin để tránh xung đột (collision avoidance).
- **Ethernet** đơn giản hơn, overhead nhỏ hơn.

**Nguyên tắc:**  
> Môi trường càng dễ bị lỗi → header & trailer càng lớn → overhead cao hơn → tốc độ truyền chậm hơn.
> 
<p align="center">
  <img src="../../images/kì 1/module 6/6.3.1.jpg" width="400"/>
</p>

---

## 6.3.2 Frame Fields

**Mục đích:**  
Chia luồng bit thành các nhóm có cấu trúc rõ ràng (framing) để các thiết bị mạng có thể **nhận diện**, **giải mã**, và **xử lý** dữ liệu chính xác.

<p align="center">
  <img src="../../images/kì 1/module 6/6.3.2.jpg" width="400"/>
</p>

**Các trường phổ biến trong một frame:**
1. **Frame Start/Stop  indicator Flags** – Xác định điểm bắt đầu và kết thúc frame.
2. **Addressing** – Địa chỉ **node** nguồn và đích (Layer 2) ( nghĩa là các trạm hiện tại và trạm tiếp theo).
3. **Type** – Xác định loại giao thức Layer 3 (IPv4, IPv6,...).
4. **Control** – Các dịch vụ điều khiển lưu lượng, QoS (quality of service).
5. **Data** – Tải trọng chứa gói tin Layer 3 và dữ liệu đi kèm.
6. **Error Detection** – Trường FCS (frame check sequence) dùng để phát hiện lỗi.

**Cơ chế phát hiện lỗi (Error Detection):**
- Tại nút gửi, tính toán **CRC** dựa trên toàn bộ frame.
- CRC được đưa vào **Frame Check Sequence (FCS)** ở trailer.
- Nút nhận tính toán lại CRC, so sánh với giá trị trong FCS.
- Nếu không khớp → frame bị loại bỏ.

---

## 6.3.3 Layer 2 Addresses

**Mục đích:**  
Đảm bảo **giao tiếp trong phạm vi cùng mạng cục bộ (local media)** thông qua địa chỉ vật lý (MAC address).

**Đặc điểm:**
- Địa chỉ Layer 2 nằm trong header của frame.
- Giúp NIC của thiết bị nhanh chóng quyết định có nhận frame hay không.
- Địa chỉ MAC là **duy nhất** cho từng thiết bị, không thay đổi khi di chuyển sang mạng khác.

**So sánh với Layer 3:**
- Layer 2: Địa chỉ **chỉ có ý nghĩa cục bộ**.
- Layer 3: Địa chỉ **mang tính toàn cục**, xác định vị trí mạng của thiết bị.

**Quá trình hoạt động:**
- **Host → Router:** Frame chứa MAC nguồn là host, MAC đích là router.
- **Router → Router:** Mỗi đoạn liên kết thay bằng MAC mới.
- **Router → Host:** MAC nguồn là router cuối, MAC đích là host đích.

> Mỗi lần frame đi qua một thiết bị trung gian (router), **frame mới được tạo lại** với MAC mới, nhưng gói Layer 3 (IP packet) vẫn giữ nguyên địa chỉ IP.

---

## 6.3.4 LAN and WAN Frames

**Mục đích:**  
Mô tả sự khác biệt về giao thức Layer 2 giữa LAN và WAN, từ đó lựa chọn công nghệ phù hợp.

**LAN:**
- **Công nghệ:** Ethernet (IEEE 802.3), 802.11 Wireless.
- **Đặc điểm:** Băng thông cao, phạm vi nhỏ (tòa nhà, campus), chi phí thấp.
- **Ứng dụng:** Mạng nội bộ doanh nghiệp, trường học.

**WAN:**
- **Công nghệ truyền thống:** PPP (Point-to-Point Protocol), HDLC (High-Level Data Link Control), Frame Relay, ATM (Asynchronous Transfer Mode), X.25.
- **Đặc điểm:** Khoảng cách xa, băng thông thấp hơn, chi phí cao.
- **Ứng dụng:** Các văn phòng chi nhánh, trung tâm dữ liệu, và các ứng dụng đám mây, cũng như kết nối với các đối tác và khách hàng ở xa

**Nguyên tắc chọn giao thức Layer 2:**
- Phụ thuộc vào **topology** (point-to-point, hub-spoke, mesh...).
- Phụ thuộc vào **media** (cáp đồng, quang, sóng vô tuyến).
- Xác định bởi yêu cầu **băng thông**, **chi phí**, **độ tin cậy**.

**Ví dụ giao thức Layer 2 phổ biến:**
- Ethernet
- 802.11 Wireless
- PPP
- HDLC
- Frame Relay
