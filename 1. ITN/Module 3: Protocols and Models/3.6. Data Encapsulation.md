
| **Title** | 3.6. Data Encapsulation |
|:---------:|:------------------------:|
| **ID**    | CCNET021                |
| **Tag**   | CCNA, Cisco, NetAcad, OSI, TCP/IP, Encapsulation |

---

## 3.6.1. Segmenting Messages

Viá»‡c hiá»ƒu rÃµ mÃ´ hÃ¬nh OSI vÃ  mÃ´ hÃ¬nh TCP/IP sáº½ ráº¥t há»¯u Ã­ch khi tÃ¬m hiá»ƒu vá» quÃ¡ trÃ¬nh Ä‘Ã³ng gÃ³i dá»¯ liá»‡u trong máº¡ng. KhÃ¡c vá»›i viá»‡c gá»­i thÆ° váº­t lÃ½ qua Ä‘Æ°á»ng bÆ°u Ä‘iá»‡n, dá»¯ liá»‡u trÃªn máº¡ng khÃ´ng thá»ƒ Ä‘Æ°á»£c truyá»n nhÆ° má»™t dÃ²ng bit liÃªn tá»¥c tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i.

- Má»™t video hay email cÃ³ thá»ƒ lÃ  má»™t dÃ²ng dá»¯ liá»‡u khá»•ng lá»“, nhÆ°ng náº¿u truyá»n Ä‘i nguyÃªn váº¹n sáº½:
  - GÃ¢y táº¯c ngháº½n kÃªnh truyá»n cho cÃ¡c thiáº¿t bá»‹ khÃ¡c.
  - Dá»… bá»‹ máº¥t toÃ n bá»™ dá»¯ liá»‡u náº¿u Ä‘Æ°á»ng truyá»n gáº·p sá»± cá»‘.

âœ… **Giáº£i phÃ¡p**: Chia nhá» dá»¯ liá»‡u thÃ nh tá»«ng pháº§n nhá» gá»i lÃ  **packets** (gÃ³i tin), quÃ¡ trÃ¬nh nÃ y gá»i lÃ  **segmentation**.

### Lá»£i Ã­ch cá»§a viá»‡c phÃ¢n máº£nh dá»¯ liá»‡u:

- **TÄƒng tá»‘c Ä‘á»™ truyá»n táº£i**:
  - Cho phÃ©p nhiá»u phiÃªn truyá»n cÃ¹ng chia sáº» máº¡ng thÃ´ng qua **multiplexing**.
- **TÄƒng hiá»‡u quáº£**:
  - Náº¿u má»™t gÃ³i bá»‹ máº¥t, chá»‰ cáº§n truyá»n láº¡i gÃ³i Ä‘Ã³ thay vÃ¬ cáº£ luá»“ng dá»¯ liá»‡u.

<p align="center">
  <img src="../../images/kÃ¬ 1/module 3/3.6.1.gif" width="400"/>
</p>

---

## 3.6.2. Sequencing

PhÃ¢n máº£nh giÃºp máº¡ng hoáº¡t Ä‘á»™ng hiá»‡u quáº£ hÆ¡n, nhÆ°ng cÅ©ng táº¡o ra thÃ¡ch thá»©c: **sáº¯p xáº¿p láº¡i thá»© tá»± gÃ³i tin**.

ğŸ“¦ VÃ­ dá»¥: Gá»­i má»™t lÃ¡ thÆ° 100 trang, má»—i phong bÃ¬ chá»‰ chá»©a má»™t trang => cáº§n 100 phong bÃ¬, vÃ  chÃºng cÃ³ thá»ƒ Ä‘áº¿n nÆ¡i **khÃ´ng Ä‘Ãºng thá»© tá»±**.

ğŸ‘‰ VÃ¬ váº­y, má»—i gÃ³i tin Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘ **sequence number** Ä‘á»ƒ thiáº¿t bá»‹ nháº­n **láº¯p rÃ¡p láº¡i Ä‘Ãºng thá»© tá»±**.

ğŸ“Œ Giao thá»©c **TCP** chá»‹u trÃ¡ch nhiá»‡m Ä‘áº£m báº£o thá»© tá»± nÃ y.

<p align="center">
  <img src="../../images/kÃ¬ 1/module 3/3.6.2.jpg" width="400"/>
</p>

---

## 3.6.3. Protocol Data Units (PDU)

Má»—i táº§ng trong mÃ´ hÃ¬nh TCP/IP thÃªm thÃ´ng tin riÃªng vÃ o dá»¯ liá»‡u. QuÃ¡ trÃ¬nh nÃ y gá»i lÃ  **Ä‘Ã³ng gÃ³i (encapsulation)**.

Dá»¯ liá»‡u táº¡i má»—i táº§ng Ä‘Æ°á»£c gá»i lÃ  **PDU (Protocol Data Unit)**. CÃ¡c PDU Ä‘Æ°á»£c Ä‘áº·t tÃªn theo táº§ng nhÆ° sau:

<p align="center">
  <img src="../../images/kÃ¬ 1/module 3/3.6.3.jpg" width="400"/>
</p>

| Táº§ng | TÃªn PDU | Chá»©c nÄƒng |
|------|---------|-----------|
| Application | **Data** | Dá»¯ liá»‡u thÃ´ tá»« á»©ng dá»¥ng |
| Transport   | **Segment** (hoáº·c Datagram vá»›i UDP) | Chá»©a dá»¯ liá»‡u vÃ  thÃ´ng tin kiá»ƒm soÃ¡t |
| Network     | **Packet** | Äá»‹a chá»‰ IP nguá»“n/Ä‘Ã­ch |
| Data Link   | **Frame** | Äá»‹a chá»‰ MAC, Ä‘iá»u khiá»ƒn truy cáº­p |
| Physical    | **Bits** | Dá»¯ liá»‡u truyá»n qua mÃ´i trÆ°á»ng váº­t lÃ½ |

ğŸ“Œ *Ghi chÃº*: Náº¿u header Transport lÃ  TCP thÃ¬ gá»i lÃ  **segment**, náº¿u lÃ  UDP thÃ¬ gá»i lÃ  **datagram**.

---

## 3.6.4. Encapsulation Example

Khi dá»¯ liá»‡u Ä‘Æ°á»£c gá»­i Ä‘i:

1. á»¨ng dá»¥ng táº¡o dá»¯ liá»‡u (Data).
2. Transport Ä‘Ã³ng gÃ³i thÃ nh Segment.
3. Network Ä‘Ã³ng gÃ³i Segment thÃ nh Packet.
4. Data Link Ä‘Ã³ng gÃ³i Packet thÃ nh Frame.
5. Physical truyá»n Frame thÃ nh dÃ²ng bit (Bits) qua dÃ¢y máº¡ng.

â¡ï¸ Má»—i táº§ng **Ä‘Ã³ng gÃ³i** táº§ng trÃªn nÃ³ nhÆ° má»™t pháº§n dá»¯ liá»‡u.

<p align="center">
  <img src="../../images/kÃ¬ 1/module 3/3.6.4.gif" width="400"/>
</p>

---

## 3.6.5. De-encapsulation Example

Khi Ä‘áº¿n thiáº¿t bá»‹ nháº­n, quÃ¡ trÃ¬nh trÃªn Ä‘Æ°á»£c **Ä‘áº£o ngÆ°á»£c**:

1. Nháº­n dÃ²ng bit (Bits).
2. Chuyá»ƒn thÃ nh Frame.
3. Gá»¡ ra Ä‘á»ƒ láº¥y Packet.
4. Gá»¡ tiáº¿p Ä‘á»ƒ láº¥y Segment.
5. Cuá»‘i cÃ¹ng nháº­n Ä‘Æ°á»£c Data.

â¡ï¸ QuÃ¡ trÃ¬nh nÃ y gá»i lÃ  **de-encapsulation (gá»¡ Ä‘Ã³ng gÃ³i)**.

<p align="center">
  <img src="../../images/kÃ¬ 1/module 3/3.6.5.gif" width="400"/>
</p>

---

ğŸ“Œ *TÃ³m táº¯t*:

- **Encapsulation** giÃºp truyá»n dá»¯ liá»‡u qua máº¡ng báº±ng cÃ¡ch thÃªm thÃ´ng tin Ä‘iá»u khiá»ƒn á»Ÿ má»—i táº§ng.
- **Segmentation** chia nhá» dá»¯ liá»‡u Ä‘á»ƒ truyá»n hiá»‡u quáº£ hÆ¡n.
- **Sequencing** Ä‘áº£m báº£o dá»¯ liá»‡u ghÃ©p Ä‘Ãºng thá»© tá»± khi Ä‘áº¿n Ä‘Ã­ch.
